# 阿里云

首先创建一个弹性伸缩组，如下图自动创建3个实例

![](../../../.gitbook/assets/image%20%281%29.png)



利用阿里云的监控进行调试测试，阿里云控制台页面，选择“云监控”，点击调试

![](../../../.gitbook/assets/image%20%2868%29.png)

输入要回收的实例ID，例如：i-bp1emy14ktx2mhb3q186，点击“确认”后，max\_group会接收中断消息

![](../../../.gitbook/assets/image%20%2824%29.png)

中断实例将被detach出伸缩组，并且创建一个新的实例进行替换

![](../../../.gitbook/assets/image%20%2857%29.png)

如果弹性伸缩组填写了“伸缩组内期望实例数”，按照[阿里云文档描述](https://yq.aliyun.com/articles/727372?spm=5176.2020520114.0.0.51b8558aT22hMI)，当手动添加实例时，“伸缩组内期望实例数”会被修改，但max\_group会智能的判断，配置为修改之前的“伸缩组内期望实例数”的值。

![](../../../.gitbook/assets/image%20%2856%29.png)

实例i-bp1emy14ktx2mhb3q186，被detach伸缩组，等待回收，此时该实例不受伸缩组规则约束

![](../../../.gitbook/assets/image%20%2862%29.png)

在实际使用中，如果实例被回收，阿里云会提前5分钟发送中断信息，当max\_group接收到信息，就会立刻创建新的实例，并加入到该伸缩组，当实例被回收后，阿里云会触发检测实例数是否大于等于设置的期望值，如果少于期望值，会进行ESC自动补偿机制，保证其实例期望数量的值。



